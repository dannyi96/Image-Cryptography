<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Rubik's Principle based Image Cryptography</title>
        <meta charset="UTF-8">
        <link rel="icon" href="./assets/icons/rubik.ico" type="image/x-icon">
        <link rel="stylesheet" href="./css/style.css"/>
        <link rel="stylesheet" href="https://pyscript.net/releases/2023.11.1/core.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&display=swap" rel="stylesheet">
        <script type="module" src="https://pyscript.net/releases/2023.11.1/core.js"></script>
    </head>
    <body>
        <!-- Header section -->
        <div class="container heading">
            <img src="./assets/icons/rubik.ico" width="50px" height="50px"/>
            <h1><a href="https://www.hindawi.com/journals/jece/2012/173931/" target="blank">Rubik's Principle based Image Cryptography</a></h1>
            <img src="./assets/icons/rubik.ico" width="50px" height="50px"/>
        </div>

        <!-- Nav bar for encryption & decryption -->
        <div class="container navbar">
            <button class="button" onclick="toggleState('encryption', 'decryption')"> Encryption </button>
            <button class="button" onclick="toggleState('decryption', 'encryption')"> Decryption </button>
        </div>

        <div id="encryption">
            <div class="container">
                <div class="container-item">
                    <h2>Input Image</h2>
                    <img id="input-image" src="./assets/imgs/placeholder.png" alt="Input Image" width="300px" height="300px">
                    <input type="file" id="image" accept="image/*" 
                        onchange="previewImage(event, 'input-image')">
                </div>
                <button id="encrypt-image" class="button"> Encrypt </button>
                <div class="container-item">
                    <h2>Output Image</h2>
                    <img id="output-image" src="./assets/imgs/placeholder.png" alt="Output Image" width="300px" height="300px">
                    <div class="container button-group">
                        <div class="container-item"><button class="button" onclick="downloadImage('output-image', 'modified.png')"> Download Image </button></div>
                        <div class="container-item"><button class="button" onclick="downloadKey('encrypt-encoded-key', 'key.txt')"> Download Key </button></div>
                    </div>
                    <div style="display: none;" id="encrypt-encoded-key"></div>
                </div>
            </div>
        </div>
        
        <div id="decryption" style="display: none;">
            <div class="container">
                <div class="container-item">
                    <h2>Input Image</h2>
                    <img id="decrypt-input-image" src="./assets/imgs/placeholder.png" alt="Input Image" width="300px" height="300px">
                    <input type="file" id="image" accept="image/*" onchange="previewImage(event, 'decrypt-input-image')"> Upload Image
                    <input type="file" id="decrypt-encoded-key" accept=".txt" onchange="previewText(event, 'decrypt-encoded-key-contents')"> Upload Key
                    <div style="display: none;" id="decrypt-encoded-key-contents"></div>
                </div>
                <button id="decrypt-image" class="button"> Decrypt </button>
                <div class="container-item">
                    <h2>Output Image</h2>
                    <img id="decrypt-output-image" src="./assets/imgs/placeholder.png" alt="Output Image" width="300px" height="300px">
                </div>
            </div>
        </div>

        <hr/>

        <script src="./js/script.js"></script>
        <script type="py" src="./pyscript/image_crypto.py" config="./pyscript/pyscript.toml"></script>
    </body>
</html>